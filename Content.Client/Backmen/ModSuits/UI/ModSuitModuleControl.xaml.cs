using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.XAML;

namespace Content.Client.Backmen.ModSuits.UI;

[GenerateTypedNameReferences]
public sealed partial class ModSuitModuleControl : PanelContainer
{
    public Action? OnModuleChosen;

    public ModSuitModuleControl(EntityUid entity, IEntityManager entityManager, int complexity, bool innate)
    {
        RobustXamlLoader.Load(this);

        ModuleView.SetEntity(entity);
        ModuleName.Text = innate
            ? Loc.GetString("mod-suit-module-innate") + " " + entityManager.GetComponent<MetaDataComponent>(entity).EntityName
            : Loc.GetString("mod-suit-module-inserted") + " " + entityManager.GetComponent<MetaDataComponent>(entity).EntityName;

        ModuleData.Visible = !innate;
        ModuleComplexity.Text = Loc.GetString("mod-suit-module-complexity", ("complexity", complexity));

        ModulePreviewButton.OnPressed += _ => OnModuleChosen?.Invoke();

        PassiveConsumption.Text = Loc.GetString("mod-suit-module-passive-consumption"/*, ("consumption", passiveConsumption)*/);
        ActiveConsumption.Text = Loc.GetString("mod-suit-module-active-consumption"/*, ("consumption", activeConsumption)*/);
    }
}

