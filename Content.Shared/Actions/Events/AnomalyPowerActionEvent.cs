using Content.Shared.Anomaly.Effects.Components;
using Content.Shared.Damage;
using Robust.Shared.Audio;

namespace Content.Shared.Actions.Events;

public sealed partial class AnomalyPowerActionEvent : InstantActionEvent
{

    [DataField]
    public string PowerName;

    /// <summary>
    ///     When casting above the Supercritical Threshold, if not 0, this will cause all powers to enter cooldown for the given duration.
    /// </summary>
    [DataField]
    public float OverchargeCooldown;

    /// <summary>
    ///     When casting above the Supercritical Threshold, if not 0, this will deal recoil damage to the caster of the specified amounts.
    /// </summary>
    [DataField]
    public DamageSpecifier? OverchargeRecoil;

    /// <summary>
    ///     When casting above the Supercritical Threshold, play a popup above the caster's head.
    /// </summary>
    [DataField]
    public string? OverchargeFeedback;

    /// <summary>
    ///     The minimum amount of glimmer generated by this power.
    /// </summary>
    [DataField]
    public int MinGlimmer;

    /// <summary>
    ///     The maximum amount of glimmer generated by this power.
    /// </summary>
    [DataField]
    public int MaxGlimmer;

    /// <summary>
    ///     The amount to multiply glimmer generation by when above the Supercritical Threshold
    /// </summary>
    [DataField]
    public int SupercriticalGlimmerMultiplier = 1;

    /// <summary>
    ///     The threshold of glimmer at which this power will play a sound.
    /// </summary>
    [DataField]
    public float GlimmerSoundThreshold;

    /// <summary>
    ///     The glimmer threshold(divided by amplification and multiplied by dampening) at which this power will act as a Supercritical Anomaly.
    /// </summary>
    [DataField]
    public float SupercriticalThreshold = 500f;

    /// <summary>
    ///     The maximum amount Dampening can increase the Supercritical threshold to.
    /// </summary>
    [DataField]
    public float MaxSupercriticalThreshold = 800f;

    /// <summary>
    ///     What entities will be spawned by this action, using the same arguments as an EntitySpawnAnomalyComponent?
    /// </summary>
    [DataField]
    public List<EntitySpawnSettingsEntry>? EntitySpawnEntries;

    /// <summary>
    ///     The sound to be played upon activating this power(and not Supercritically)
    /// </summary>
    [DataField]
    public SoundSpecifier? PulseSound = new SoundCollectionSpecifier("RadiationPulse");

    /// <summary>
    ///     The sound plays when this power is activated above a Supercritical glimmer threshold
    /// </summary>
    [DataField]
    public SoundSpecifier? SupercriticalSound = new SoundCollectionSpecifier("Explosion");
}
