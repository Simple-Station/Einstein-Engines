- type: entity
  id: UnionfallCapturePoint
  parent: BaseMachinePowered
  name: NT-X8 'Jamrock' deflector emitter (MAIN OBJECTIVE)
  description: An experimental shield emitter thought to be lost to time. Capable of blocking even subnuclear fire without flinching. Once configured to an IFF signature, it activates and allows those signatures in as well.
  components:
  - type: AmbientSound
    volume: -5
    range: 30
    enabled: true
    sound:
      path: /Audio/_EE/Supermatter/delamming.ogg
  - type: Sprite
    noRot: true
    sprite: _Crescent/Structures/capturepoint.rsi
    layers:
    - state: icon
    - state: unlit
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
  - type: GenericVisualizer
    visuals:
      enum.PowerDeviceVisuals.Powered:
        enum.PowerDeviceVisualLayers.Powered:
          True: { visible: true }
          False: { visible: false }
    snapCardinals: true
  - type: Physics
    bodyType: Static
  - type: Transform
    noRot: true
  - type: Fixtures
    fixtures:
      machine:
        shape:
          !type:PhysShapeAabb
          bounds: "-2,-2,2,2"
        mask:
        - FullTileMask
        layer:
        - FullTileLayer
        density: 1000
      display:
        shape:
          !type:PhysShapeAabb
          bounds: "-2,0,0,1.8"
        mask:
        - MachineMask
        layer:
        - MachineLayer
        density: 1000
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 900000
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:PlaySoundBehavior
        sound:
          collection: MetalGlassBreak
  - type: Repairable
    doAfterDelay: 8
  # - type: Electrified If we had multifixture this would be fine
  #   enabled: true
  #   usesApcPower: true
  #   shockDamage: 60
  - type: PointLight
    enabled: false
    castShadows: true
    radius: 5
    offset: 1.5, -2
    color: "#90d5ff"
  - type: AnimationPlayer
  - type: Appearance
  - type: UnionfallCapturePoint
    gracePeriod: 1200
    timeToCapture: 10
    captureTimeBonus: 180
    timeToEnd: 1200
    isAnnouncerUnionfall: true


- type: entity
  id: UnionfallShipNodeDSM
  parent: BaseMachinePowered
  name: DSM Main Cloner Database (MAIN OBJECTIVE)
  description: This device holds all the DNA samples and data for cloning. Protect this with your life, because without it you will not get another.
  components:
  - type: AmbientSound
    volume: -5
    range: 30
    enabled: true
    sound:
      path: /Audio/_EE/Supermatter/delamming.ogg
  - type: Sprite
    noRot: true
    sprite: _Crescent/Structures/capturepoint.rsi
    layers:
    - state: icon
    - state: lightingDSM
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
  - type: GenericVisualizer
    visuals:
      enum.PowerDeviceVisuals.Powered:
        enum.PowerDeviceVisualLayers.Powered:
          True: { visible: true }
          False: { visible: false }
    snapCardinals: true
  - type: Physics
    bodyType: Static
  - type: Transform
    noRot: true
  - type: Fixtures
    fixtures:
      machine:
        shape:
          !type:PhysShapeAabb
          bounds: "-2,-2,2,2"
        mask:
        - FullTileMask
        layer:
        - FullTileLayer
        density: 1000
      display:
        shape:
          !type:PhysShapeAabb
          bounds: "-2,0,0,1.8"
        mask:
        - MachineMask
        layer:
        - MachineLayer
        density: 1000
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 10000
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:PlaySoundBehavior
        sound:
          collection: MetalGlassBreak
  - type: Repairable
    doAfterDelay: 8
  # - type: Electrified If we had multifixture this would be fine
  #   enabled: true
  #   usesApcPower: true
  #   shockDamage: 60
  - type: PointLight
    enabled: false
    castShadows: true
    radius: 5
    offset: 1.5, -2
    color: "#90d5ff"
  - type: AnimationPlayer
  - type: Appearance
  - type: Explosive
    explosionType: Default
    totalIntensity: 120 # ~ 5 tile radius
  - type: UnionfallShipNode
    gracePeriod: 1200
    timeToCapture: 60
    doAfterDelay: 10
    owningFaction: DSM

- type: entity
  id: UnionfallShipNodeNCWL
  parent: BaseMachinePowered
  name: NCWL Main Cloner Database (MAIN OBJECTIVE)
  description: This device holds all the DNA samples and data for cloning. Protect this with your life, because without it you will not get another.
  components:
  - type: AmbientSound
    volume: -5
    range: 30
    enabled: true
    sound:
      path: /Audio/_EE/Supermatter/delamming.ogg
  - type: Sprite
    noRot: true
    sprite: _Crescent/Structures/capturepoint.rsi
    layers:
    - state: icon
    - state: lightingNCWL
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
  - type: GenericVisualizer
    visuals:
      enum.PowerDeviceVisuals.Powered:
        enum.PowerDeviceVisualLayers.Powered:
          True: { visible: true }
          False: { visible: false }
    snapCardinals: true
  - type: Physics
    bodyType: Static
  - type: Transform
    noRot: true
  - type: Fixtures
    fixtures:
      machine:
        shape:
          !type:PhysShapeAabb
          bounds: "-2,-2,2,2"
        mask:
        - FullTileMask
        layer:
        - FullTileLayer
        density: 1000
      display:
        shape:
          !type:PhysShapeAabb
          bounds: "-2,0,0,1.8"
        mask:
        - MachineMask
        layer:
        - MachineLayer
        density: 1000
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 10000
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:PlaySoundBehavior
        sound:
          collection: MetalGlassBreak
  - type: Repairable
    doAfterDelay: 8
  # - type: Electrified If we had multifixture this would be fine
  #   enabled: true
  #   usesApcPower: true
  #   shockDamage: 60
  - type: PointLight
    enabled: false
    castShadows: true
    radius: 5
    offset: 1.5, -2
    color: "#90d5ff"
  - type: AnimationPlayer
  - type: Appearance
  - type: Explosive
    explosionType: Default
    totalIntensity: 120 # ~ 5 tile radius
  - type: UnionfallShipNode
    gracePeriod: 1200
    timeToCapture: 60
    doAfterDelay: 10
    owningFaction: NCWL

- type: entity
  id: UnionfallAnnouncerEntity
  parent: BaseMachinePowered
  name: UnionfallAnnouncer
  description: Dont look at this
  components:
  - type: AmbientSound
    volume: -5
    range: 30
    enabled: true
    sound:
      path: /Audio/_EE/Supermatter/delamming.ogg
  - type: Sprite
    noRot: true
    sprite: _Crescent/Structures/capturepoint.rsi
    layers:
    - state: icon
    - state: unlit
      shader: unshaded
      map: ["enum.PowerDeviceVisualLayers.Powered"]
  - type: GenericVisualizer
    visuals:
      enum.PowerDeviceVisuals.Powered:
        enum.PowerDeviceVisualLayers.Powered:
          True: { visible: true }
          False: { visible: false }
    snapCardinals: true
  - type: Physics
    bodyType: Static
  - type: Transform
    noRot: true
  - type: Fixtures
    fixtures:
      machine:
        shape:
          !type:PhysShapeAabb
          bounds: "-2,-2,2,2"
        mask:
        - FullTileMask
        layer:
        - FullTileLayer
        density: 1000
      display:
        shape:
          !type:PhysShapeAabb
          bounds: "-2,0,0,1.8"
        mask:
        - MachineMask
        layer:
        - MachineLayer
        density: 1000
  - type: PointLight
    enabled: false
    castShadows: true
    radius: 5
    offset: 1.5, -2
    color: "#90d5ff"
  - type: AnimationPlayer
  - type: Appearance
  - type: UnionfallAnnouncer
    gracePeriod: 1200