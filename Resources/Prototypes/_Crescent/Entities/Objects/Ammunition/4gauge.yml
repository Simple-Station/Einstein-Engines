- type: entity
  id: BaseShellShotgun4g
  name: shell (4g)
  parent: BaseCartridge
  abstract: true
  components:
  - type: Tag
    tags:
    - Cartridge
    - ShellShotgun4g
  - type: CartridgeAmmo
    soundEject:
      collection: ShellEject
  - type: Sprite
    sprite: _Crescent/Objects/Weapons/Ammunition/Casings/shotgun.rsi
    layers:
      - state: base
        map: [ "enum.AmmoVisualLayers.Base" ]
  - type: Appearance
  - type: SpentAmmoVisuals
  - type: EmitSoundOnLand
    sound:
      collection: ShellBulletBounce
  - type: EmitSoundOnCollide
    sound:
      collection: ShellBulletBounce

- type: entity
  parent: BaseAmmoProvider
  id: AmmoProviderShotgunShell4g
  abstract: true
  components:
    - type: BallisticAmmoProvider
      mayTransfer: true
      whitelist:
        tags:
        - ShellShotgun4g
      capacity: 16

# --------------------- BEANBAG --------------------------

- type: entity
  id: ShellShotgun4gBeanbag
  name: shell (4g beanbag)
  parent: BaseShellShotgun4g
  components:
  - type: Sprite
    layers:
      - state: beanbag
        map: [ "enum.AmmoVisualLayers.Base" ]
  - type: CartridgeAmmo
    proto: PelletShotgunBeanbag4g
  - type: SpentAmmoVisuals
    state: "beanbag"

- type: entity
  id: PelletShotgunBeanbag4g
  name: beanbag (4g)
  categories: [ HideSpawnMenu ]
  parent: BaseBullet
  components:
  - type: Sprite
    sprite: Objects/Weapons/Guns/Projectiles/projectiles2.rsi
    state: buckshot
  - type: Projectile
    damage:
      types:
        Blunt: 15
  - type: StaminaDamageOnCollide
    damage: 55

- type: entity
  name: 4g beanbag box
  parent: AmmoProviderShotgunShell4g
  id: BoxBeanbag4g
  description: A box full of beanbag shells, designed for 4 gauge shotguns.
  components:
    - type: BallisticAmmoProvider
      proto: ShellShotgun4gBeanbag
    - type: Sprite
      layers:
        - state: boxwide
        - state: shellbeanbag

# --------------------- SLUG --------------------------

- type: entity
  id: ShellShotgun4gSlug
  name: shell (4g slug)
  parent: BaseShellShotgun4g
  components:
  - type: Sprite
    layers:
      - state: slug
        map: [ "enum.AmmoVisualLayers.Base" ]
  - type: CartridgeAmmo
    proto: PelletShotgunSlug4g
  - type: SpentAmmoVisuals
    state: "slug"

- type: entity
  id: PelletShotgunSlug4g
  name: pellet (4g slug)
  categories: [ HideSpawnMenu ]
  parent: BaseBullet
  components:
  - type: Sprite
    sprite: Objects/Weapons/Guns/Projectiles/projectiles2.rsi
    state: slug
  - type: Projectile
    damage:
      types:
        Piercing: 100

- type: entity
  name: 4g slug box
  parent: AmmoProviderShotgunShell4g
  id: BoxShotgunSlug4g
  description: A box full of slug shells, designed for 4 gauge shotguns.
  components:
    - type: BallisticAmmoProvider
      proto: ShellShotgun4gSlug
    - type: Sprite
      layers:
        - state: boxwide
        - state: shellslug

# --------------------- BUCKSHOT --------------------------

- type: entity
  id: ShellShotgun4gBuckshot
  name: shell (4g buckshot)
  parent: BaseShellShotgun4g
  components:
  - type: Sprite
    layers:
      - state: base
        map: [ "enum.AmmoVisualLayers.Base" ]
  - type: CartridgeAmmo
    proto: PelletShotgunSpread4g

- type: entity
  id: PelletShotgun4g
  name: pellet (4g buckshot)
  categories: [ HideSpawnMenu ]
  parent: BaseBullet
  components:
  - type: Sprite
    sprite: Objects/Weapons/Guns/Projectiles/projectiles2.rsi
    state: buckshot
  - type: Projectile
    damage:
      types:
        Piercing: 24 # 24 x 10 = 240

- type: entity
  id: PelletShotgunSpread4g
  categories: [ HideSpawnMenu ]
  parent: PelletShotgun4g
  components:
  - type: ProjectileSpread
    proto: PelletShotgun4g
    count: 10
    spread: 12.5

- type: entity
  name: 4g buckshot box
  parent: AmmoProviderShotgunShell4g
  id: BoxLethalshot4g
  description: A box full of buckshot shells, designed for 4 gauge shotguns.
  components:
    - type: BallisticAmmoProvider
      proto: ShellShotgun4gBuckshot
    - type: Sprite
      layers:
        - state: boxwide
        - state: shelllethal

# --------------------- FLASH --------------------------

- type: entity
  id: ShellShotgun4gFlash
  name: shell (4g flash)
  parent: BaseShellShotgun4g
  components:
  - type: Sprite
    layers:
      - state: lumen
        map: [ "enum.AmmoVisualLayers.Base" ]
  - type: CartridgeAmmo
    proto: PelletShotgunFlashSpread4g
  - type: SpentAmmoVisuals
    state: "lumen"

- type: entity
  id: PelletShotgunFlash4g
  name: pellet (4g flash)
  categories: [ HideSpawnMenu ]
  parent: BaseBulletTrigger
  components:
  - type: Sprite
    sprite: Objects/Weapons/Guns/Projectiles/projectiles2.rsi
    state: slug
  - type: FlashOnTrigger
    range: 3
  - type: SpawnOnTrigger
    proto: GrenadeFlashEffect
  - type: ActiveTimerTrigger
    timeRemaining: 0.3
  - type: Projectile
  - type: StaminaDamageOnCollide
    damage: 20
  - type: DeleteOnTrigger

- type: entity
  id: PelletShotgunFlashSpread4g
  categories: [ HideSpawnMenu ]
  parent: PelletShotgunFlash4g
  components:
  - type: ProjectileSpread
    proto: PelletShotgunFlash4g
    count: 6
    spread: 40

- type: entity
  name: 4g flash box
  parent: AmmoProviderShotgunShell4g
  id: BoxShotgunFlash4g
  description: A dispenser box full of flash shells, designed for 4 gauge shotguns.
  components:
    - type: BallisticAmmoProvider
      proto: ShellShotgun4gFlash
    - type: Sprite
      layers:
        - state: boxwide
        - state: shelluranium

# --------------------- MARKER FLARE --------------------------

- type: entity
  id: PelletShotgunMarkerFlare4g
  name: pellet (4g marker flare)
  categories: [ HideSpawnMenu ]
  parent: BaseBullet
  components:
  - type: ExpendableHeatTracked
    toggleDelay: 40
  - type: CanBeHeatTracked
    heatSignature: 30
  - type: Projectile
  - type: PointLight
    enabled: false
    color: "#FF8080"
    radius: 1.0
    energy: 9.0
    netsync: false
  - type: IgnitionSource
    temperature: 1000
  - type: LightBehaviour
    behaviours:
      - !type:FadeBehaviour # have the radius start small and get larger as it starts to burn
        id: turn_on
        maxDuration: 45.0
        startValue: 2.5
        endValue: 10.0
      - !type:RandomizeBehaviour # weaker flicker as it fades out
        id: fade_out
        interpolate: Nearest
        minDuration: 0.001
        maxDuration: 0.001
        startValue: 4.0
        endValue: 8.0
        property: Energy
        isLooped: true
      - !type:FadeBehaviour # fade out radius as it burns out
        id: fade_out
        maxDuration: 15.0
        startValue: 10.0
        endValue: 1.0
  - type: TimedDespawn
    lifetime: 45

- type: entity
  id: ShellShotgun4gMarkerFlare
  name: shell (4g marker flare)
  parent: BaseShellShotgun4g
  components:
  - type: Sprite
    layers:
      - state: lumen
        map: [ "enum.AmmoVisualLayers.Base" ]
  - type: CartridgeAmmo
    proto: PelletShotgunFlashSpread4g
  - type: SpentAmmoVisuals
    state: "lumen"

- type: entity
  name: 4g marker flate box
  parent: AmmoProviderShotgunShell4g
  id: BoxShotgunMarkerFlare4g
  description: A dispenser box full of marker flare shells, designed for 4 gauge shotguns.
  components:
    - type: BallisticAmmoProvider
      proto: ShellShotgun4gMarkerFlare
    - type: Sprite
      layers:
        - state: boxwide
        - state: shelluranium
